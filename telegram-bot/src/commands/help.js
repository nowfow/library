import { fmt, bold, italic, code, link } from 'telegraf/format';
import { createMainMenuKeyboard } from '../utils/keyboards.js';
import { asyncHandler } from '../utils/errorHandler.js';

/**
 * Handle /help command
 * @param {Object} ctx - Telegraf context
 */
export const helpCommand = asyncHandler(async (ctx) => {
  const helpMessage = fmt`üìñ ${bold('–°–ø—Ä–∞–≤–∫–∞ –ø–æ –ú—É–∑—ã–∫–∞–ª—å–Ω–æ–π –ë–∏–±–ª–∏–æ—Ç–µ–∫–µ')}

${bold('üîç –ö–û–ú–ê–ù–î–´ –ü–û–ò–°–ö–ê:')}

${code('/search_composer <–∏–º—è>')}
–ü–æ–∏—Å–∫ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π –ø–æ –∏–º–µ–Ω–∏ –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä–∞
${italic('–ü—Ä–∏–º–µ—Ä:')} ${code('/search_composer –ë–∞—Ö')}

${code('/search_work <–Ω–∞–∑–≤–∞–Ω–∏–µ>')}
–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
${italic('–ü—Ä–∏–º–µ—Ä:')} ${code('/search_work –°–æ–Ω–∞—Ç–∞')}

${code('/search_term <—Ç–µ—Ä–º–∏–Ω>')}
–ü–æ–∏—Å–∫ –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤
${italic('–ü—Ä–∏–º–µ—Ä:')} ${code('/search_term –∞–∫–∫–æ—Ä–¥')}

${code('/browse')}
–ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–æ–≤ –≤ –æ–±–ª–∞—á–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

${code('/stats')}
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º—É–∑—ã–∫–∞–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

${bold('üì± –ù–ê–í–ò–ì–ê–¶–ò–Ø:')}
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ${italic('inline-–∫–Ω–æ–ø–∫–∏')} –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
‚Ä¢ ${code('‚¨ÖÔ∏è –ü—Ä–µ–¥. / –°–ª–µ–¥. ‚û°Ô∏è')} - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü
‚Ä¢ ${code('üìÅ –ü–∞–ø–∫–∞')} - –ø–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
‚Ä¢ ${code('üìÑ –§–∞–π–ª')} - —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞

${bold('üìÑ –ü–û–î–î–ï–†–ñ–ò–í–ê–ï–ú–´–ï –§–ê–ô–õ–´:')}
‚Ä¢ ${code('PDF')} - –Ω–æ—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ PDF
‚Ä¢ ${code('MP3, WAV, FLAC')} - –∞—É–¥–∏–æ—Ñ–∞–π–ª—ã
‚Ä¢ ${code('SIB, MUS')} - —Ñ–∞–π–ª—ã –Ω–æ—Ç–Ω—ã—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤
‚Ä¢ ${code('ZIP, RAR')} - –∞—Ä—Ö–∏–≤—ã

${bold('üí° –°–û–í–ï–¢–´:')}
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ${italic('—á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ')} –≤ –ø–æ–∏—Å–∫–µ
‚Ä¢ –ü–æ–∏—Å–∫ ${italic('–Ω–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É')}
‚Ä¢ –†–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ ${italic('–ª–∞—Ç–∏–Ω–∏—Ü–∞')}, —Ç–∞–∫ –∏ ${italic('–∫–∏—Ä–∏–ª–ª–∏—Ü–∞')}
‚Ä¢ –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ ${italic('–∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å')}

${bold('üéµ –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!')}`;

  await ctx.reply(helpMessage, createMainMenuKeyboard());
});